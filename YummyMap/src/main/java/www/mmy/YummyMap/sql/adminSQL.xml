<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
			PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
					"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
					
<mapper namespace="adminSQL">
		<select id="loginck" resultType="int" parameterType="adminVo" >
			SELECT 
				count(*) cnt
			FROM
				member
			WHERE
				mid = #{mid}
				AND mpw = #{mpw} 
		</select>
		
		<select id="membercnt" resultType="int" parameterType="adminVo">
			SELECT 
				count(*) cnt
			FROM
				member
			WHERE
				isshow = 'Y'
				AND GRADE = 'M'
 				<if test="mid != null and mid != ''"> AND mid = #{mid}</if>
 				<if test="mname != null and mname != ''">AND mname = #{mname}</if>
		</select>
		
		<select id="memberList" resultType="adminVo" parameterType="hashmap" >
			SELECT 
			    rno ,mno , mid , mname , issue , joindate , joindate jointime 
			FROM
			(
			    SELECT 
			      ROWNUM rno , mno , mid , mname , issue , joindate 
			    FROM
			        (SELECT
			          mno , mid , mname , issue , joindate
			         FROM 
			            member
			         WHERE
			         	isshow = 'Y'
			         	<if test="avo.mid != null and avo.mid != ''">AND mid = #{avo.mid}</if>
			         	<if test="avo.mname != null and avo.mname != ''">AND mname = #{avo.mname}</if>
			         ORDER BY
			            mno desc
			         )
			)
			WHERE
			    rno BETWEEN #{page.startCont} AND #{page.endCont}
		</select>
		
</mapper>